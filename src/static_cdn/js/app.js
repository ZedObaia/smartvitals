(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],d=0,f=[];d<o.length;d++)i=o[d],s[i]&&f.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},s={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=n("bb71");n("da64");a["a"].use(s["a"],{iconfont:"md"});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-toolbar",{attrs:{app:""}},[n("v-toolbar-title",{staticClass:"headline text-uppercase"},[n("span",[e._v("Vuetify")]),n("span",{staticClass:"font-weight-light"},[e._v("MATERIAL DESIGN")])]),n("v-spacer"),n("v-btn",{attrs:{flat:"",href:"https://github.com/vuetifyjs/vuetify/releases/latest",target:"_blank"}},[n("span",{staticClass:"mr-2"},[e._v("Latest Release")])])],1),n("v-content",[n("Main")],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"grid-list-xs":""}},[n("v-text-field",{attrs:{label:"Message",id:"id"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),n("v-btn",{attrs:{color:"success"},on:{click:e.sendMessage}},[e._v("\n    Send   \n    "),n("v-icon",[e._v("send")])],1),n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Patients")]),n("v-spacer")],1),n("v-data-table",{attrs:{headers:e.headers,items:e.patients,expand:e.expand,"item-key":"name"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{on:{click:function(n){t.expanded=!t.expanded,e.resetChart(),e.joinRoom(e.patients.indexOf(t.item))}}},[n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.id))]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.name))]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.heartrate))]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.temp))])])]}},{key:"expand",fn:function(t){return[n("v-card",{attrs:{flat:""}},[n("v-container",{attrs:{"grid-list-xs":""}},[n("div",{attrs:{id:"chart"}},[n("apexchart",{ref:"realtimeChart",attrs:{type:"line",height:"350",options:e.chartOptions,series:e.series}})],1)])],1)]}}])})],1)},c=[],l=(n("7f7f"),n("bc3a")),u=n.n(l),d=0,f=[];function p(e,t,n){var a=0;while(a<t){var s=e,r=Math.floor(Math.random()*(n.max-n.min+1))+n.min;f.push({x:s,y:r}),d=e,e+=3600,a++}}function m(e){var t=d+3600;d=t,f.push({x:t,y:e})}p((new Date).getTime(),1,{min:10,max:90});var h={data:function(){return{expand:!1,headers:[{text:"#",align:"center",sortable:!1,value:"id"},{text:"Name",align:"center",sortable:!1,value:"name"},{text:"Heart Rate",align:"center",sortable:!1,value:"heartrate"},{text:"Tempreture",align:"center",sortable:!1,value:"temp"}],message:"",logs:[],patients:[],status:"disconnected",currentPatient:{},chartOptions:{chart:{animations:{enabled:!0,easing:"linear",dynamicAnimation:{speed:20}},toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},title:{text:"EMG Signal",align:"left"},markers:{size:0},xaxis:{type:"datetime",range:777600,labels:{show:!1}},yaxis:{max:5,min:0,forceNiceScale:!0},legend:{show:!1}},series:[{data:f.slice()}]}},methods:{getPatients:function(){var e=this;u.a.get("api/patients").then(function(t){e.patients=t.data;for(var n=0;n<e.patients.length;n++){var a=e.patients[n].id;e.$socket.sendObj(JSON.stringify({command:"join",patient:a}))}}).catch(function(e){console.log(e)})},sendMessage:function(){console.log("sending"),this.$socket.sendObj(JSON.stringify({command:"send",patient:this.currentPatient.id,message:this.message})),this.message=""},messageReceived:function(e){var t=JSON.parse(e.data);if("message"==t.type){var n=t.room,a=this.patients.filter(function(e){return e.id===n});if(a=a[0],a.temp=t.message.temp,a.heartrate=t.message.heartrate,n==this.currentPatient.id)for(var s=JSON.parse(t.message.emg),r=0;r<s.length;r++){var i=s[r];m(i)}}},joinRoom:function(e){this.currentPatient.id===this.patients[e].id?this.currentPatient={}:(this.currentPatient.id=this.patients[e].id,this.currentPatient.name=this.patients[e].name,this.currentPatient.doctor=this.patients[e].doctor)},resetChart:function(){f=[],p((new Date).getTime(),1,{min:10,max:90})},intervals:function(){var e=this;window.setInterval(function(){e.$refs.realtimeChart&&e.$refs.realtimeChart.updateSeries([{data:f}])},20)},leaveAllRooms:function(){for(var e=0;e<this.patients.length;e++){var t=this.patients[e].id;this.$socket.sendObj(JSON.stringify({command:"leave",patient:t}))}}},mounted:function(){this.getPatients(),this.intervals()},beforeMount:function(){var e=this;this.$socket.onmessage=function(t){return e.messageReceived(t)}},beforeDestroy:function(){this.leaveAllRooms()}},v=h,g=n("2877"),b=n("6544"),x=n.n(b),y=n("8336"),O=n("b0af"),_=n("a523"),C=n("8fea"),k=n("132d"),S=n("9910"),w=n("2677"),E=n("71d9"),T=n("2a7f"),j=Object(g["a"])(v,o,c,!1,null,null,null),M=j.exports;x()(j,{VBtn:y["a"],VCard:O["a"],VContainer:_["a"],VDataTable:C["a"],VIcon:k["a"],VSpacer:S["a"],VTextField:w["a"],VToolbar:E["a"],VToolbarTitle:T["a"]});var P={name:"App",components:{Main:M},data:function(){return{}}},R=P,N=n("7496"),V=n("549c"),$=Object(g["a"])(R,r,i,!1,null,null,null),A=$.exports;x()($,{VApp:N["a"],VBtn:y["a"],VContent:V["a"],VSpacer:S["a"],VToolbar:E["a"],VToolbarTitle:T["a"]});var J=n("8c4f"),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Main")},K=[],L={components:{Main:M}},I=L,G=Object(g["a"])(I,D,K,!1,null,null,null),z=G.exports;a["a"].use(J["a"]);var B=new J["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:z}]}),F=n("2f62");a["a"].use(F["a"]);var H=new F["a"].Store({state:{socket:{isConnected:!1,message:"",reconnectError:!1}},mutations:{SOCKET_ONOPEN:function(e,t){a["a"].prototype.$socket=t.currentTarget,e.socket.isConnected=!0},SOCKET_ONCLOSE:function(e,t){e.socket.isConnected=!1},SOCKET_ONERROR:function(e,t){console.error(e,t)},SOCKET_ONMESSAGE:function(e,t){e.socket.message=t,console.log(t)},SOCKET_RECONNECT:function(e,t){console.info(e,t)},SOCKET_RECONNECT_ERROR:function(e){e.socket.reconnectError=!0}},actions:{sendMessage:function(e,t){a["a"].prototype.$socket.send(t)}}}),U=n("b408"),q=n.n(U),Q=n("1321"),W=n.n(Q);a["a"].use(W.a),a["a"].config.productionTip=!1,u.a.defaults.baseURL="http://localhost:8000/",a["a"].use(q.a,"ws://localhost:8000/monitor/",{store:H,format:"json",reconnection:!0,reconnectionDelay:1e3}),a["a"].component("apexchart",W.a),new a["a"]({router:B,store:H,render:function(e){return e(A)}}).$mount("#app")}});
//# sourceMappingURL=app.6920c985.js.map